extern /totality_limit:TOTALITY

suite evs_prod
  inlimit /totality_limit:TOTALITY
  family primary
    edit evs_ver 'v1.0'
    edit PACKAGEHOME '/lfs/h2/emc/global/noscrub/%EMC_USER%/para/packages/evs.%evs_ver%'
    edit NET 'evs'
    edit RUN 'evs'
    edit PROJ 'VERF'
    edit PROJENVIR 'DEV'
    edit MACHINE_SITE 'development'
    edit ENVIR 'prod'
    edit QUEUE 'dev'
    edit QUEUE_ARCH 'dev_transfer'
    edit OUTPUTDIR '/lfs/h2/emc/ptmp/%EMC_USER%/ecflow_evs/para/output/prod/today'
    edit ECF_FILES '%PACKAGEHOME%/ecf/scripts'
    # edit ECF_FILES '/lfs/h2/emc/global/noscrub/lin.gan/para/packages/evs.v1.0/ecf/scripts'
    family rtofs
      edit MODEL 'rtofs'
      family prep
        task jevs_rtofs_prep
          time 07:00
      endfamily
      family stats
        task jevs_rtofs_ndbc_stats
          trigger ../prep/jevs_rtofs_prep == complete
        task jevs_rtofs_argo_stats
          trigger ../prep/jevs_rtofs_prep == complete
        task jevs_rtofs_aviso_stats
          trigger ../prep/jevs_rtofs_prep == complete
        task jevs_rtofs_ghrsst_stats
          trigger ../prep/jevs_rtofs_prep == complete
        task jevs_rtofs_osisaf_stats
          trigger ../prep/jevs_rtofs_prep == complete
        task jevs_rtofs_smap_stats
          trigger ../prep/jevs_rtofs_prep == complete
        task jevs_rtofs_smos_stats
          trigger ../prep/jevs_rtofs_prep == complete
      endfamily
      family plots
        task jevs_rtofs_plots
          trigger ../stats == complete
        task jevs_rtofs_headline_plots
          trigger ../stats == complete
      endfamily
      family rtofs_manager
        task next_run
          cron 00:00 23:00 01:00
      endfamily
    endfamily  # rtofs
    family narre
      edit MODEL 'narre'
      family stats
        task jevs_narre_stats
          time 07:00
      endfamily
      family plots
        task jevs_narre_past90days_plots
          trigger ../stats == complete
        task jevs_narre_past31days_plots
          trigger ../stats == complete
      endfamily
      family narre_manager
        task next_run
          cron 00:00 23:00 01:00
      endfamily
    endfamily  # narre
    family global_ens
      edit MODEL 'global_ens'
      family prep
        task jevs_naefs_atmos_prep
          time 07:00
        task jevs_global_ens_wave_grid2obs_prep
        task jevs_global_ens_headline_prep
        task jevs_global_ens_atmos_prep
      endfamily
      family stats
        task jevs_naefs_headline_grid2grid_stats
        task jevs_naefs_atmos_precip_stats
        task jevs_naefs_atmos_grid2obs_stats
        task jevs_naefs_atmos_grid2grid_stats
        task jevs_global_ens_wave_grid2obs_stats
        task jevs_gfs_headline_grid2grid_stats
        task jevs_gefs_wmo_grid2grid_stats
        task jevs_gefs_headline_grid2grid_stats
        task jevs_gefs_atmos_sst_stats
        task jevs_gefs_atmos_snowfall_stats
        task jevs_gefs_atmos_sea_ice_stats
        task jevs_gefs_atmos_precip_stats
        task jevs_gefs_atmos_grid2obs_stats
        task jevs_gefs_atmos_grid2grid_stats
        task jevs_gefs_atmos_cnv_stats
        task jevs_ecme_atmos_snowfall_stats
        task jevs_ecme_atmos_precip_stats
        task jevs_ecme_atmos_grid2obs_stats
        task jevs_ecme_atmos_grid2grid_stats
        task jevs_cmce_wmo_grid2grid_stats
        task jevs_cmce_atmos_snowfall_stats
        task jevs_cmce_atmos_precip_stats
        task jevs_cmce_atmos_grid2obs_stats
        task jevs_cmce_atmos_grid2grid_stats
      endfamily
      family plots
        task jevs_naefs_precip_past90days_plots
        task jevs_naefs_precip_past31days_plots
        task jevs_naefs_grid2obs_past90days_plots
        task jevs_naefs_grid2obs_past31days_plots
        task jevs_naefs_grid2grid_past90days_plots
        task jevs_naefs_grid2grid_past31days_plots
        task jevs_global_ens_wave_grid2obs_plots
        task jevs_gefs_sst_past90days_plots
        task jevs_gefs_sst_past31days_plots
        task jevs_gefs_snowfall_past90days_plots
        task jevs_gefs_snowfall_past31days_plots
        task jevs_gefs_sea_ice_past90days_plots
        task jevs_gefs_sea_ice_past31days_plots
        task jevs_gefs_profile4_past90days_plots
        task jevs_gefs_profile4_past31days_plots
        task jevs_gefs_profile3_past90days_plots
        task jevs_gefs_profile3_past31days_plots
        task jevs_gefs_profile2_past90days_plots
        task jevs_gefs_profile2_past31days_plots
        task jevs_gefs_profile1_past90days_plots
        task jevs_gefs_profile1_past31days_plots
        task jevs_gefs_precip_spatial_plots
        task jevs_gefs_precip_past90days_plots
        task jevs_gefs_precip_past31days_plots
        task jevs_gefs_headline_plots
        task jevs_gefs_grid2obs_past90days_plots
        task jevs_gefs_grid2obs_past90days_init_separate_plots
        task jevs_gefs_grid2obs_past31days_plots
        task jevs_gefs_grid2obs_past31days_init_separate_plots
        task jevs_gefs_grid2grid_past90days_plots
        task jevs_gefs_grid2grid_past31days_plots
      endfamily
      family global_ens_manager
        task next_run
          cron 00:00 23:00 01:00
      endfamily
    endfamily  # global_ens
    family subseasonal
      edit MODEL 'subseasonal'
      family prep
        time 14:00
        task jevs_subseasonal_obs_prep
        task jevs_subseasonal_gefs_prep
        task jevs_subseasonal_cfs_prep
      endfamily
      family stats
        trigger ./prep == complete
        task jevs_gefs_subseasonal_grid2obs_stats
        task jevs_gefs_subseasonal_grid2grid_stats
        task jevs_cfs_subseasonal_grid2obs_stats
        task jevs_cfs_subseasonal_grid2grid_stats
      endfamily
      family plots
        trigger ./stats == complete
        task jevs_subseasonal_grid2obs_PrepBufr_plots_90days
        task jevs_subseasonal_grid2obs_PrepBufr_plots_31days
        task jevs_subseasonal_grid2grid_sst_plots_90days
        task jevs_subseasonal_grid2grid_sst_plots_31days
        task jevs_subseasonal_grid2grid_sea_ice_plots_90days
        task jevs_subseasonal_grid2grid_sea_ice_plots_31days
        task jevs_subseasonal_grid2grid_pres_lvls_plots_90days
        task jevs_subseasonal_grid2grid_pres_lvls_plots_31days
        task jevs_subseasonal_grid2grid_anom_plots_90days
        task jevs_subseasonal_grid2grid_anom_plots_31days
      endfamily
    endfamily  # subseasonal
    family nfcens
      edit MODEL 'nfcens'
      family prep
        task jevs_nfcens_wave_prep
          time 12:00
      endfamily   
      family stats
        trigger ./prep == complete
        task jevs_nfcens_wave_stats
      endfamily
      family plots
        trigger ./stats == complete
        task jevs_nfcens_wave_plots
      endfamily
    endfamily  # nfcens
    family wafs
      edit MODEL 'wafs'
      family stats
        task jevs_wafs_atmos_stats
          time 09:00
      endfamily
      family plots
        task jevs_wafs_atmos_plots
          trigger ../stats/jevs_wafs_atmos_stats == complete
      endfamily
      family wafs_manager
        task next_run
          cron 00:00 23:00 01:00
      endfamily
    endfamily  # wafs
    family mesoscale
      edit MODEL 'mesoscale'
      family stats
        task jevs_mesoscale_nam_precip_stats
          cron 00:00 23:00 01:00
        task jevs_mesoscale_rap_precip_stats
          cron 00:00 23:00 01:00
        task jevs_mesoscale_nam_grid2obs_stats
          time 07:00
        task jevs_mesoscale_rap_grid2obs_stats
          time 07:00
        task jevs_mesoscale_nam_snowfall_stats
          cron 00:00 23:00 06:00
        task jevs_mesoscale_rap_snowfall_stats
          cron 00:00 23:00 06:00
        task jevs_mesoscale_sref_cnv_stats
          time 08:30
        task jevs_mesoscale_sref_precip_stats
          time 09:30
        task jevs_mesoscale_sref_grid2obs_stats
          time 09:30
      endfamily
      family plots
        trigger ./stats == complete
        task jevs_mesoscale_sref_grid2obs_past90days_plots
          time 12:30
        task jevs_mesoscale_sref_precip_past90days_plots
          time 12:30
        task jevs_mesoscale_sref_cnv_past90days_plots
          time 12:30
        task jevs_mesoscale_sref_precip_spatial_plots
          time 12:30
        task jevs_mesoscale_precip_plots
          time 00:00
        task jevs_mesoscale_snowfall_plots
          time 00:00
      endfamily
    endfamily  # mesoscale
    family global_det
      edit MODEL 'global_det'
      family prep
        task jevs_global_det_atmos_prep
          time 14:00
          time 22:00
        task jevs_global_det_wave_prep
          time 13:00
      endfamily
      family stats
        trigger ./prep == complete
        task jevs_global_det_ukmet_atmos_grid2obs_stats
        task jevs_global_det_ukmet_atmos_grid2grid_stats
        task jevs_global_det_metfra_atmos_grid2grid_stats
        task jevs_global_det_jma_atmos_grid2obs_stats
        task jevs_global_det_jma_atmos_grid2grid_stats
        task jevs_global_det_imd_atmos_grid2obs_stats
        task jevs_global_det_imd_atmos_grid2grid_stats
        task jevs_global_det_gfs_atmos_grid2obs_stats
        task jevs_global_det_gfs_atmos_grid2grid_stats
        task jevs_global_det_fnmoc_atmos_grid2obs_stats
        task jevs_global_det_fnmoc_atmos_grid2grid_stats
        task jevs_global_det_ecmwf_atmos_grid2obs_stats
        task jevs_global_det_ecmwf_atmos_grid2grid_stats
        task jevs_global_det_dwd_atmos_grid2grid_stats
        task jevs_global_det_cmc_regional_atmos_grid2grid_stats
        task jevs_global_det_cmc_atmos_grid2obs_stats
        task jevs_global_det_cmc_atmos_grid2grid_stats
        task jevs_global_det_cfs_atmos_grid2obs_stats
        task jevs_global_det_cfs_atmos_grid2grid_stats
        task jevs_global_det_gfs_wave_grid2obs_stats
      endfamily
      family plots
        trigger ./stats == complete
        task jevs_global_det_atmos_headline_plots
        task jevs_global_det_atmos_grid2obs_sfc_plots_90days
        task jevs_global_det_atmos_grid2obs_sfc_plots_31days
        task jevs_global_det_atmos_grid2obs_ptype_plots_90days
        task jevs_global_det_atmos_grid2obs_ptype_plots_31days
        task jevs_global_det_atmos_grid2obs_pres_levs_plots_90days
        task jevs_global_det_atmos_grid2obs_pres_levs_plots_31days
        task jevs_global_det_atmos_grid2grid_sst_plots_90days
        task jevs_global_det_atmos_grid2grid_sst_plots_31days
        task jevs_global_det_atmos_grid2grid_snow_plots_90days
        task jevs_global_det_atmos_grid2grid_snow_plots_31days
        task jevs_global_det_atmos_grid2grid_sea_ice_plots_90days
        task jevs_global_det_atmos_grid2grid_sea_ice_plots_31days
        task jevs_global_det_atmos_grid2grid_pres_levs_plots_90days
        task jevs_global_det_atmos_grid2grid_pres_levs_plots_31days
        task jevs_global_det_atmos_grid2grid_precip_plots_90days
        task jevs_global_det_atmos_grid2grid_precip_plots_31days
        task jevs_global_det_atmos_grid2grid_means_plots_90days
        task jevs_global_det_atmos_grid2grid_means_plots_31days
        task jevs_global_det_wave_grid2obs_plots_31days
        task jevs_global_det_wave_grid2obs_plots_90days
      endfamily
      family global_det_manager
        task next_run
          cron 00:00 23:00 01:00
      endfamily
    endfamily  # global_det
    family cam
      edit MODEL 'cam'
      family prep
        task jevs_rrfs_severe_prep
          time 07:00
        task jevs_namnest_severe_prep
        task jevs_namnest_precip_prep
        task jevs_namnest_grid2obs_prep
        task jevs_hrrr_severe_prep
        task jevs_hrrr_precip_prep
        task jevs_hrrr_grid2obs_prep
        task jevs_href_severe_prep
        task jevs_hireswfv3_severe_prep
        task jevs_hireswfv3_precip_prep
        task jevs_hireswfv3_grid2obs_prep
        task jevs_hireswarw_severe_prep
        task jevs_hireswarw_precip_prep
        task jevs_hireswarwmem2_severe_prep
        task jevs_hireswarwmem2_precip_prep
        task jevs_hireswarwmem2_grid2obs_prep
        task jevs_hireswarw_grid2obs_prep
        task jevs_cam_severe_prep
        task jevs_cam_radar_prep
      endfamily
      family stats
        task jevs_namnest_precip_stats
        task jevs_namnest_grid2obs_stats
        task jevs_nam_firewxnest_grid2obs_stats
        task jevs_hrrr_precip_stats
        task jevs_hrrr_grid2obs_stats
        task jevs_href_precip_stats
        task jevs_href_grid2obs_stats
        task jevs_hireswfv3_precip_stats
        task jevs_hireswfv3_grid2obs_stats
        task jevs_hireswarw_precip_stats
        task jevs_hireswarwmem2_precip_stats
        task jevs_hireswarwmem2_grid2obs_stats
        task jevs_hireswarw_grid2obs_stats
      endfamily
      family plots
        task jevs_nam_firewxnest_grid2obs_plots
        task jevs_href_snowfall_past90days_plots
        task jevs_href_snowfall_past31days_plots
        task jevs_href_profile_past90days_plots
        task jevs_href_profile_past31days_plots
        task jevs_href_precip_spatial_plots
        task jevs_href_precip_past90days_plots
        task jevs_href_precip_past31days_plots
        task jevs_href_grid2obs_ecnt_past90days_plots
        task jevs_href_grid2obs_ecnt_past31days_plots
        task jevs_href_grid2obs_ctc_past90days_plots
        task jevs_href_grid2obs_ctc_past31days_plots
        task jevs_cam_precip_plots
        task jevs_cam_grid2obs_plots
      endfamily
      family cam_manager
        task next_run
          cron 00:00 23:00 01:00
      endfamily
    endfamily  # cam
    family aqm
      edit MODEL 'aqm'
      family prep
        task jevs_aqm_prep
          time 00:00
      endfamily
      family stats
        trigger ./prep/jevs_aqm_prep == complete
        task jevs_aqm_stats_cyc_00
          time 00:00
          edit CYC '00'
        task jevs_aqm_stats_cyc_01
          time 01:00
          edit CYC '01'
        task jevs_aqm_stats_cyc_02
          time 02:00
          edit CYC '02'
        task jevs_aqm_stats_cyc_03
          time 03:00
          edit CYC '03'
        task jevs_aqm_stats_cyc_04
          time 04:00
          edit CYC '04'
        task jevs_aqm_stats_cyc_05
          time 05:00
          edit CYC '05'
        task jevs_aqm_stats_cyc_06
          time 06:00
          edit CYC '06'
        task jevs_aqm_stats_cyc_07
          time 07:00
          edit CYC '07'
        task jevs_aqm_stats_cyc_08
          time 08:00
          edit CYC '08'
        task jevs_aqm_stats_cyc_09
          time 09:00
          edit CYC '09'
        task jevs_aqm_stats_cyc_10
          time 10:00
          edit CYC '10'
        task jevs_aqm_stats_cyc_11
          time 11:00
          edit CYC '11'
        task jevs_aqm_stats_cyc_12
          time 12:00
          edit CYC '12'
        task jevs_aqm_stats_cyc_13
          time 13:00
          edit CYC '13'
        task jevs_aqm_stats_cyc_14
          time 14:00
          edit CYC '14'
        task jevs_aqm_stats_cyc_15
          time 15:00
          edit CYC '15'
        task jevs_aqm_stats_cyc_16
          time 16:00
          edit CYC '16'
        task jevs_aqm_stats_cyc_17
          time 17:00
          edit CYC '17'
        task jevs_aqm_stats_cyc_18
          time 18:00
          edit CYC '18'
        task jevs_aqm_stats_cyc_19
          time 19:00
          edit CYC '19'
        task jevs_aqm_stats_cyc_20
          time 20:00
          edit CYC '20'
        task jevs_aqm_stats_cyc_21
          time 21:00
          edit CYC '21'
        task jevs_aqm_stats_cyc_22
          time 22:00
          edit CYC '22'
        task jevs_aqm_stats_cyc_23
          time 23:00
          edit CYC '23'
      endfamily
      family plots
        task jevs_aqm_plots
          trigger ../prep/jevs_aqm_prep == complete and ../stats/jevs_aqm_stats_cyc_23 == complete
      endfamily
      family aqm_manager
        task next_run
          trigger ../plots/jevs_aqm_plots == complete
      endfamily
    endfamily  # aqm
    family analyses
      edit MODEL 'analyses'
      family stats
        task jevs_urma_stats
        task jevs_rtma_stats
        task jevs_rtma_ru_stats
      endfamily
      family plots
        task jevs_analyses_plots
      endfamily
      family analyses_manager
        task next_run
          cron 00:00 23:00 01:00
      endfamily
    endfamily  # analyses
  endfamily    # primary
endsuite
